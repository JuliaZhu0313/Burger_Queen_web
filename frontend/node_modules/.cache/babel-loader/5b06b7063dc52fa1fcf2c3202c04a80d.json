{"remainingRequest":"/Users/zhongyitong/Downloads/bt3103/Group5_BT3103/frontend/node_modules/babel-loader/lib/index.js!/Users/zhongyitong/Downloads/bt3103/Group5_BT3103/frontend/node_modules/vue-loader-v16/dist/templateLoader.js??ref--6!/Users/zhongyitong/Downloads/bt3103/Group5_BT3103/frontend/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/zhongyitong/Downloads/bt3103/Group5_BT3103/frontend/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/zhongyitong/Downloads/bt3103/Group5_BT3103/frontend/src/components/Cart.vue?vue&type=template&id=530ad160&scoped=true","dependencies":[{"path":"/Users/zhongyitong/Downloads/bt3103/Group5_BT3103/frontend/src/components/Cart.vue","mtime":1667614531123},{"path":"/Users/zhongyitong/Downloads/bt3103/Group5_BT3103/frontend/babel.config.js","mtime":1667614523440},{"path":"/Users/zhongyitong/Downloads/bt3103/Group5_BT3103/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1667614525458},{"path":"/Users/zhongyitong/Downloads/bt3103/Group5_BT3103/frontend/node_modules/babel-loader/lib/index.js","mtime":1667614525329},{"path":"/Users/zhongyitong/Downloads/bt3103/Group5_BT3103/frontend/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":1667614530732},{"path":"/Users/zhongyitong/Downloads/bt3103/Group5_BT3103/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1667614525458},{"path":"/Users/zhongyitong/Downloads/bt3103/Group5_BT3103/frontend/node_modules/vue-loader-v16/dist/index.js","mtime":1667614530728}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCB7IHJlbmRlckxpc3QgYXMgX3JlbmRlckxpc3QsIEZyYWdtZW50IGFzIF9GcmFnbWVudCwgb3BlbkJsb2NrIGFzIF9vcGVuQmxvY2ssIGNyZWF0ZUVsZW1lbnRCbG9jayBhcyBfY3JlYXRlRWxlbWVudEJsb2NrLCB0b0Rpc3BsYXlTdHJpbmcgYXMgX3RvRGlzcGxheVN0cmluZywgY3JlYXRlRWxlbWVudFZOb2RlIGFzIF9jcmVhdGVFbGVtZW50Vk5vZGUsIGNyZWF0ZUNvbW1lbnRWTm9kZSBhcyBfY3JlYXRlQ29tbWVudFZOb2RlLCBwdXNoU2NvcGVJZCBhcyBfcHVzaFNjb3BlSWQsIHBvcFNjb3BlSWQgYXMgX3BvcFNjb3BlSWQgfSBmcm9tICJ2dWUiOwpjb25zdCBfd2l0aFNjb3BlSWQgPSBuID0+IChfcHVzaFNjb3BlSWQoImRhdGEtdi01MzBhZDE2MCIpLCBuID0gbigpLCBfcG9wU2NvcGVJZCgpLCBuKTsKY29uc3QgX2hvaXN0ZWRfMSA9IHsKICBjbGFzczogImJ1cmdlciIKfTsKY29uc3QgX2hvaXN0ZWRfMiA9IHsKICAiZGF0YS10aCI6ICJQcm9kdWN0Igp9Owpjb25zdCBfaG9pc3RlZF8zID0gewogIGNsYXNzOiAicm93Igp9Owpjb25zdCBfaG9pc3RlZF80ID0gewogICJkYXRhLXRoIjogIlByaWNlIgp9Owpjb25zdCBfaG9pc3RlZF81ID0gewogICJkYXRhLXRoIjogIlF1YW50aXR5Igp9Owpjb25zdCBfaG9pc3RlZF82ID0gWyJvbkNsaWNrIl07CmNvbnN0IF9ob2lzdGVkXzcgPSBbInZhbHVlIiwgImlkIl07CmNvbnN0IF9ob2lzdGVkXzggPSBbIm9uQ2xpY2siXTsKY29uc3QgX2hvaXN0ZWRfOSA9IHsKICAiZGF0YS10aCI6ICJTdWJ0b3RhbCIsCiAgY2xhc3M6ICJ0ZXh0LWNlbnRlciIKfTsKY29uc3QgX2hvaXN0ZWRfMTAgPSBbIm9uQ2xpY2siXTsKY29uc3QgX2hvaXN0ZWRfMTEgPSB7CiAga2V5OiAwLAogIGNsYXNzOiAiZW1wdHlfY2FydCIKfTsKY29uc3QgX2hvaXN0ZWRfMTIgPSAvKiNfX1BVUkVfXyovX3dpdGhTY29wZUlkKCgpID0+IC8qI19fUFVSRV9fKi9fY3JlYXRlRWxlbWVudFZOb2RlKCJoMiIsIG51bGwsICIgVGhlcmUncyBub3RoaW5nIGluIHlvdXIgc2hvcHBpbmcgY2FydCEgIiwgLTEgLyogSE9JU1RFRCAqLykpOwpjb25zdCBfaG9pc3RlZF8xMyA9IFtfaG9pc3RlZF8xMl07CmNvbnN0IF9ob2lzdGVkXzE0ID0gLyojX19QVVJFX18qL193aXRoU2NvcGVJZCgoKSA9PiAvKiNfX1BVUkVfXyovX2NyZWF0ZUVsZW1lbnRWTm9kZSgiaDMiLCBudWxsLCAiU2F2ZSBhbmQgZ28gYmFjayB0byBNZW51IiwgLTEgLyogSE9JU1RFRCAqLykpOwpjb25zdCBfaG9pc3RlZF8xNSA9IFtfaG9pc3RlZF8xNF07CmNvbnN0IF9ob2lzdGVkXzE2ID0gLyojX19QVVJFX18qL193aXRoU2NvcGVJZCgoKSA9PiAvKiNfX1BVUkVfXyovX2NyZWF0ZUVsZW1lbnRWTm9kZSgiYnIiLCBudWxsLCBudWxsLCAtMSAvKiBIT0lTVEVEICovKSk7CmNvbnN0IF9ob2lzdGVkXzE3ID0gLyojX19QVVJFX18qL193aXRoU2NvcGVJZCgoKSA9PiAvKiNfX1BVUkVfXyovX2NyZWF0ZUVsZW1lbnRWTm9kZSgiYnIiLCBudWxsLCBudWxsLCAtMSAvKiBIT0lTVEVEICovKSk7CgpleHBvcnQgZnVuY3Rpb24gcmVuZGVyKF9jdHgsIF9jYWNoZSwgJHByb3BzLCAkc2V0dXAsICRkYXRhLCAkb3B0aW9ucykgewogIHJldHVybiBfb3BlbkJsb2NrKCksIF9jcmVhdGVFbGVtZW50QmxvY2soX0ZyYWdtZW50LCBudWxsLCBbX2NyZWF0ZUVsZW1lbnRWTm9kZSgidGFibGUiLCBudWxsLCBbKF9vcGVuQmxvY2sodHJ1ZSksIF9jcmVhdGVFbGVtZW50QmxvY2soX0ZyYWdtZW50LCBudWxsLCBfcmVuZGVyTGlzdCgkZGF0YS5jYXJ0LCBpdGVtID0+IHsKICAgIHJldHVybiBfb3BlbkJsb2NrKCksIF9jcmVhdGVFbGVtZW50QmxvY2soImRpdiIsIHsKICAgICAga2V5OiBpdGVtLm5hbWUsCiAgICAgIGNsYXNzOiAiY2FydDEiCiAgICB9LCBbX2NyZWF0ZUVsZW1lbnRWTm9kZSgidHIiLCBudWxsLCBbX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfMSwgW19jcmVhdGVFbGVtZW50Vk5vZGUoInRkIiwgX2hvaXN0ZWRfMiwgW19jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIF9ob2lzdGVkXzMsIFtfY3JlYXRlRWxlbWVudFZOb2RlKCJkaXYiLCBudWxsLCBbX2NyZWF0ZUVsZW1lbnRWTm9kZSgiaDQiLCBudWxsLCBfdG9EaXNwbGF5U3RyaW5nKGl0ZW0ubmFtZSksIDEgLyogVEVYVCAqLyldKV0pXSksIF9jcmVhdGVFbGVtZW50Vk5vZGUoInRkIiwgX2hvaXN0ZWRfNCwgIiQiICsgX3RvRGlzcGxheVN0cmluZyhpdGVtLnByaWNlKSwgMSAvKiBURVhUICovKSwgX2NyZWF0ZUVsZW1lbnRWTm9kZSgidGQiLCBfaG9pc3RlZF81LCBbX2NyZWF0ZUVsZW1lbnRWTm9kZSgiYnV0dG9uIiwgewogICAgICBjbGFzczogIm1pbnVzIiwKICAgICAgb25DbGljazogJGV2ZW50ID0+ICRvcHRpb25zLm1pbnVzKGl0ZW0ubmFtZSksCiAgICAgIHR5cGU6ICJidXR0b24iCiAgICB9LCAiLSIsIDggLyogUFJPUFMgKi8sIF9ob2lzdGVkXzYpLCBfY3JlYXRlRWxlbWVudFZOb2RlKCJpbnB1dCIsIHsKICAgICAgdHlwZTogIm51bWJlciIsCiAgICAgIHZhbHVlOiBpdGVtLmFtb3VudCwKICAgICAgbWluOiAiMSIsCiAgICAgIGlkOiBpdGVtLm5hbWUKICAgIH0sIG51bGwsIDggLyogUFJPUFMgKi8sIF9ob2lzdGVkXzcpLCBfY3JlYXRlRWxlbWVudFZOb2RlKCJidXR0b24iLCB7CiAgICAgIGNsYXNzOiAicGx1cyIsCiAgICAgIG9uQ2xpY2s6ICRldmVudCA9PiAkb3B0aW9ucy5wbHVzKGl0ZW0ubmFtZSksCiAgICAgIHR5cGU6ICJidXR0b24iCiAgICB9LCAiKyIsIDggLyogUFJPUFMgKi8sIF9ob2lzdGVkXzgpXSksIF9jcmVhdGVFbGVtZW50Vk5vZGUoInRkIiwgX2hvaXN0ZWRfOSwgIlN1YnRvdGFsOiAkIiArIF90b0Rpc3BsYXlTdHJpbmcoJG9wdGlvbnMuc3VidG90YWwoaXRlbS5hbW91bnQsIGl0ZW0ucHJpY2UpKSwgMSAvKiBURVhUICovKSwgX2NyZWF0ZUVsZW1lbnRWTm9kZSgidGQiLCBudWxsLCBbX2NyZWF0ZUVsZW1lbnRWTm9kZSgiYnV0dG9uIiwgewogICAgICBjbGFzczogImRlbGV0ZSIsCiAgICAgIG9uQ2xpY2s6ICRldmVudCA9PiB7CiAgICAgICAgJG9wdGlvbnMubmV3X2RlbGV0ZShpdGVtLm5hbWUpOwogICAgICB9CiAgICB9LCAiRGVsZXRlIiwgOCAvKiBQUk9QUyAqLywgX2hvaXN0ZWRfMTApXSldKV0pXSk7CiAgfSksIDEyOCAvKiBLRVlFRF9GUkFHTUVOVCAqLykpXSksICRkYXRhLmNhcnQubGVuZ3RoID09IDAgPyAoX29wZW5CbG9jaygpLCBfY3JlYXRlRWxlbWVudEJsb2NrKCJkaXYiLCBfaG9pc3RlZF8xMSwgX2hvaXN0ZWRfMTMpKSA6IF9jcmVhdGVDb21tZW50Vk5vZGUoInYtaWYiLCB0cnVlKSwgX2NyZWF0ZUVsZW1lbnRWTm9kZSgiYnV0dG9uIiwgewogICAgb25DbGljazogX2NhY2hlWzBdIHx8IChfY2FjaGVbMF0gPSAkZXZlbnQgPT4gdGhpcy4kcm91dGVyLnB1c2goJy9tZW51JykpLAogICAgY2xhc3M6ICJidXR0b24iCiAgfSwgX2hvaXN0ZWRfMTUpLCBfaG9pc3RlZF8xNiwgX2hvaXN0ZWRfMTcsIF9jcmVhdGVFbGVtZW50Vk5vZGUoImJ1dHRvbiIsIHsKICAgIG9uQ2xpY2s6IF9jYWNoZVsxXSB8fCAoX2NhY2hlWzFdID0gJGV2ZW50ID0+IHRoaXMuJHJvdXRlci5wdXNoKCcvcGF5bWVudCcpKSwKICAgIGNsYXNzOiAib3JkZXIiCiAgfSwgIk1ha2UgUGF5bWVudCIpXSwgNjQgLyogU1RBQkxFX0ZSQUdNRU5UICovKTsKfQ=="},{"version":3,"mappings":";;;;EAIiBA,KAAK,EAAC;AAAQ;;EACf,SAAO,EAAC;AAAS;;EACZA,KAAK,EAAC;AAAK;;EAMhB,SAAO,EAAC;AAAO;;EACf,SAAO,EAAC;AAAU;;;;;EAKlB,SAAO,EAAC,UAAU;EAACA,KAAK,EAAC;;;;;EAQpCA,KAAK,EAAC;;iEACPC,oBAAiD,YAA7C,0CAAwC;qBAA5CC,WAAiD;iEAI5BD,oBAAiC,YAA7B,0BAAwB;qBAA5BE,WAAiC;iEAEtDF,oBAAI;iEAAAA,oBAAI;;;6DAhCZA,oBAwBQ,mCAvBJG,oBAsBMC,6BAtBgBC,UAAI,EAAZC,IAAI;yBAAlBH,oBAsBM;MAtBuBI,GAAG,EAAED,IAAI,CAACE,IAAI;MAAET,KAAK,EAAC;QAC/CC,oBAoBK,aAnBDA,oBAkBE,OAlBFS,UAkBE,GAjBFT,oBAMK,MANLU,UAMK,GALDV,oBAIM,OAJNW,UAIM,GAHFX,oBAEM,cADFA,oBAAwB,6BAAjBM,IAAI,CAACE,IAAI,wBAI5BR,oBAA0C,MAA1CY,UAA0C,EAAtB,GAAC,oBAAGN,IAAI,CAACO,KAAK,kBAClCb,oBAIK,MAJLc,UAIK,GAHDd,oBAAwE;MAAhED,KAAK,EAAC,OAAO;MAAEgB,OAAK,YAAEC,cAAK,CAACV,IAAI,CAACE,IAAI;MAAGS,IAAI,EAAC;OAAS,GAAC,8BAC/DjB,oBAAkE;MAA3DiB,IAAI,EAAC,QAAQ;MAAEC,KAAK,EAAEZ,IAAI,CAACa,MAAM;MAAEC,GAAG,EAAC,GAAG;MAAEC,EAAE,EAAEf,IAAI,CAACE;yCAC5DR,oBAAyE;MAAhED,KAAK,EAAC,MAAM;MAAEgB,OAAK,YAAIC,aAAI,CAACV,IAAI,CAACE,IAAI;MAAGS,IAAI,EAAC;OAAS,GAAC,gCAEpEjB,oBAAkG,MAAlGsB,UAAkG,EAAvD,aAAW,oBAAGN,iBAAQ,CAACV,IAAI,CAACa,MAAM,EAAEb,IAAI,CAACO,KAAK,mBACzFb,oBAEK,aADDA,oBAAsE;MAA9DD,KAAK,EAAC,QAAQ;MAAEgB,OAAK;QAAEC,mBAAU,CAACV,IAAI,CAACE,IAAI;MAAA;OAAI,QAAM;oCAM/CH,UAAI,CAACkB,MAAM,uBAAzCpB,oBAEM,OAFNqB,WAEM,qDACFxB,oBAGS;IAFFe,OAAK,2CAAOU,OAAO,CAACC,IAAI;IACzB3B,KAAK,EAAC;mBAEZ4B,WAAI,aAAI,EACR3B,oBAEyC;IADlCe,OAAK,2CAAOU,OAAO,CAACC,IAAI;IACzB3B,KAAK,EAAC;KAAQ,cAAY","names":["class","_createElementVNode","_hoisted_12","_hoisted_14","_createElementBlock","_Fragment","$data","item","key","name","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","price","_hoisted_5","onClick","$options","type","value","amount","min","id","_hoisted_9","length","_hoisted_11","$router","push","_hoisted_16"],"sourceRoot":"","sources":["/Users/zhongyitong/Downloads/bt3103/Group5_BT3103/frontend/src/components/Cart.vue"],"sourcesContent":["<template v-if=\"user\">\n<table>\n    <div v-for = \"item in cart\" :key=\"item.name\" class=\"cart1\">\n        <tr>\n            <div class=\"burger\">\n            <td data-th=\"Product\">\n                <div class=\"row\">\n                    <div>\n                        <h4>{{ item.name }}</h4>\n                    </div>\n                </div>\n            </td>\n            <td data-th=\"Price\">${{ item.price }}</td>\n            <td data-th=\"Quantity\">\n                <button class=\"minus\" @click=\"minus(item.name)\" type=\"button\">-</button>\n                <input type=\"number\" :value=\"item.amount\" min=\"1\" :id=\"item.name\">\n                <button  class=\"plus\" @click = \"plus(item.name)\" type=\"button\">+</button>\n            </td>\n            <td data-th=\"Subtotal\" class=\"text-center\">Subtotal: ${{ subtotal(item.amount, item.price) }}</td>\n            <td>\n                <button class=\"delete\" @click=\"new_delete(item.name);\">Delete</button>\n            </td>\n        </div>\n        </tr>\n    </div>\n</table>\n<div class=\"empty_cart\" v-if=\"cart.length==0\">\n    <h2> There's nothing in your shopping cart! </h2>\n</div>\n    <button\n          @click=\"this.$router.push('/menu')\" \n          class=\"button\"><h3>Save and go back to Menu</h3>\n    </button>\n    <br><br>\n    <button \n          @click=\"this.$router.push('/payment')\"\n          class=\"order\">Make Payment</button>\n</template>\n<script>\n    import firebaseApp from '../firebase.js';\n    import {collection, getDocs} from \"firebase/firestore\";\n    import { getFirestore, doc, updateDoc,deleteDoc} from \"firebase/firestore\"\n    import {getAuth, onAuthStateChanged} from 'firebase/auth';\n\n    const db = getFirestore(firebaseApp);\n\texport default {\n        name: 'cart',\n    data() {\n        return {\n\t\tcart: [],\n        user: false\n    }\n\t},\n\tasync mounted() {\n        const auth = getAuth();\n        onAuthStateChanged(auth, async (user)=>{\n            if (user) { \n                this.user=user;\n                await this.getAll();\n            } \n            });\n        //await this.getAll();\n\t},\n\n    methods: {\n\t\tasync getAll() {\n            const auth = await getAuth();\n\t\t\ttry {\n                console.log(auth.currentUser.email)\n\t\t\t\tconst cartRef = collection(db, String(auth.currentUser.email)) //refrence the collection\n\t\t\t\tconst q = await getDocs(cartRef) //get all docs in collection\n\t\t\t\tq.forEach((doc) => {\n\t\t\t\t\tthis.cart = [...this.cart, doc.data(), ] //push to cart array\n\t\t\t\t});\n\t\t\t\tconsole.log(this.cart)\n\t\t\t} catch (e) {\n\t\t\t\tconsole.log(e);\n\t\t\t}\n\t\t},\n        plus(id){\n            const auth = getAuth();\n            var a = document.getElementById(id).value\n            try{\n                a ++\n                document.getElementById(id).value = a\n                const d_minus={\n                    amount: a\n                }\n                updateDoc(doc(db, String(auth.currentUser.email), id), d_minus)\n                for (let i = 0; i < this.cart.length; i++) {\n                if (this.cart[i].name == id){\n                    this.cart[i].amount ++\n                }\n            }\n            }\n            catch(error){\n                console.error(\"Error adding:  \", error)\n            }\n\n        },\n        minus(id){\n            const auth = getAuth();\n            var a = document.getElementById(id).value\n            try{\n                if (a <= 1) {\n                    a = 1\n                } else{\n                    a -=1\n                    for (let i = 0; i < this.cart.length; i++) {\n                    if (this.cart[i].name == id){\n                        this.cart[i].amount --\n                    }\n                }\n                }\n                document.getElementById(id).value = a\n                const d_plus={\n                    amount: a\n                }\n                updateDoc(doc(db, String(auth.currentUser.email), id), d_plus)\n            }\n            catch(error){\n                console.error(\"Error removing item!\")\n            }\n        },\n        subtotal(amount, price){\n            return amount * price\n        },\n        new_delete(item){\n        const auth = getAuth();\n        try{\n            deleteDoc(doc(db, String(auth.currentUser.email), item))\n            for (let i = 0; i < this.cart.length; i++) {\n                if (this.cart[i].name == item){\n                    this.cart.splice(i, 1)\n                }\n            }\n            alert(\"Delete successfully!\")\n        }\n        catch(error){\n                console.error(\"Error removing item!\")\n            }\n        },\n    },\n}\n</script>\n<style scoped>\ntd{\n    padding: 15px;\n}\n.button, .order{\n    background-color: #c77414;\n\tcolor: white;\n    margin:auto;\n    display:block;\n    border-radius: 12px;\n\tfont-weight: bold;\n    padding: 10px 40px;\n}\n.empty_cart{\n    text-align: center;\n}\n</style>\n"]}]}