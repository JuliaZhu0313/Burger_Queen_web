{"remainingRequest":"/Users/zhangbokai/Desktop/bt3103/Group5_BT3103/frontend/node_modules/babel-loader/lib/index.js!/Users/zhangbokai/Desktop/bt3103/Group5_BT3103/frontend/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/zhangbokai/Desktop/bt3103/Group5_BT3103/frontend/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/zhangbokai/Desktop/bt3103/Group5_BT3103/frontend/src/views/OrderRecords.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/zhangbokai/Desktop/bt3103/Group5_BT3103/frontend/src/views/OrderRecords.vue","mtime":1667894605883},{"path":"/Users/zhangbokai/Desktop/bt3103/Group5_BT3103/frontend/babel.config.js","mtime":1667893789566},{"path":"/Users/zhangbokai/Desktop/bt3103/Group5_BT3103/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1667893791404},{"path":"/Users/zhangbokai/Desktop/bt3103/Group5_BT3103/frontend/node_modules/babel-loader/lib/index.js","mtime":1667893791293},{"path":"/Users/zhangbokai/Desktop/bt3103/Group5_BT3103/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1667893791404},{"path":"/Users/zhangbokai/Desktop/bt3103/Group5_BT3103/frontend/node_modules/vue-loader-v16/dist/index.js","mtime":1667893795572}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCBOYXZCYXIgZnJvbSAnQC9jb21wb25lbnRzL05hdkJhci52dWUnOwppbXBvcnQgRm9vdGVyIGZyb20gJ0AvY29tcG9uZW50cy9Gb290ZXIudnVlJzsKaW1wb3J0IHsgY29sbGVjdGlvbiwgZ2V0RG9jcyB9IGZyb20gImZpcmViYXNlL2ZpcmVzdG9yZSI7CmltcG9ydCB7IGdldEZpcmVzdG9yZSB9IGZyb20gImZpcmViYXNlL2ZpcmVzdG9yZSI7CmltcG9ydCB7IGdldEF1dGgsIG9uQXV0aFN0YXRlQ2hhbmdlZCB9IGZyb20gJ2ZpcmViYXNlL2F1dGgnOwpjb25zdCBkYiA9IGdldEZpcmVzdG9yZSgpOwpjb25zdCBhdXRoID0gZ2V0QXV0aCgpOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ09yZGVyUmVjb3JkcycsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVzZXI6IGZhbHNlLAogICAgICBvcmRlcjogW10KICAgIH07CiAgfSwKICBhc3luYyBtb3VudGVkKCkgewogICAgb25BdXRoU3RhdGVDaGFuZ2VkKGF1dGgsIGFzeW5jIHVzZXIgPT4gewogICAgICBpZiAodXNlcikgewogICAgICAgIHRoaXMudXNlciA9IHVzZXI7CiAgICAgICAgYXdhaXQgdGhpcy5nZXRBbGwoKTsKICAgICAgfQogICAgfSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBhc3luYyBnZXRBbGwoKSB7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcGF0aDEgPSBTdHJpbmcoYXV0aC5jdXJyZW50VXNlci5lbWFpbCkgKyAnX29yZGVycyc7CiAgICAgICAgY29uc3Qgb3JkZXJSZWYgPSBjb2xsZWN0aW9uKGRiLCBwYXRoMSk7CiAgICAgICAgY29uc3QgYSA9IGF3YWl0IGdldERvY3Mob3JkZXJSZWYpOwogICAgICAgIGEuZm9yRWFjaChkb2MgPT4gewogICAgICAgICAgdGhpcy5vcmRlciA9IFsuLi50aGlzLm9yZGVyLCBkb2MuZGF0YSgpXTsgLy9wdXNoIHRvIG9yZGVyIGFycmF5CiAgICAgICAgfSk7CgogICAgICAgIHRoaXMub3JkZXIuZm9yRWFjaChlbGUgPT4gewogICAgICAgICAgbGV0IGRpc2hlcyA9IFtdOwogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbGUubmFtZS5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBkaXNoZXMucHVzaCh7CiAgICAgICAgICAgICAgbmFtZTogZWxlLm5hbWVbaV0sCiAgICAgICAgICAgICAgYW1vdW50OiBlbGUuYW1vdW50W2ldLAogICAgICAgICAgICAgIHByaWNlOiBlbGUucHJpY2VbaV0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBPYmplY3QuYXNzaWduKGVsZSwgewogICAgICAgICAgICBkaXNoZXM6IGRpc2hlcwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgICAgY29uc29sZS5sb2codGhpcy5vcmRlcik7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgfQogICAgfQogIH0sCiAgY29tcG9uZW50czogewogICAgTmF2QmFyLAogICAgRm9vdGVyCiAgfQp9Ow=="},{"version":3,"mappings":";AAwBA,OAAOA,MAAK,MAAO,yBAAwB;AAC3C,OAAOC,MAAK,MAAO,yBAAwB;AAC3C,SAAQC,UAAU,EAAEC,OAAO,QAAO,oBAAmB;AACrD,SAASC,YAAW,QAAS,oBAAmB;AAChD,SAAQC,OAAO,EAAEC,kBAAkB,QAAO,eAAc;AAExD,MAAMC,EAAC,GAAIH,YAAY,EAAE;AACzB,MAAMI,IAAG,GAAIH,OAAO,EAAE;AAEtB,eAAc;EACVI,IAAI,EAAC,cAAc;EACnBC,IAAI,GAAG;IACH,OAAO;MACPC,IAAI,EAAE,KAAK;MACXC,KAAK,EAAE;IACP;EAEN,CAAC;EACD,MAAMC,OAAO,GAAG;IACdP,kBAAkB,CAACE,IAAI,EAAE,MAAMG,IAAI,IAAG;MACtC,IAAIA,IAAI,EAAE;QACN,IAAI,CAACA,IAAI,GAACA,IAAI;QACd,MAAM,IAAI,CAACG,MAAM,EAAE;MACvB;IACA,CAAC,CAAC;EACJ,CAAC;EACDC,OAAO,EAAE;IACH,MAAMD,MAAM,GAAG;MACb,IAAI;QACA,MAAME,KAAI,GAAIC,MAAM,CAACT,IAAI,CAACU,WAAW,CAACC,KAAK,IAAI,SAAQ;QACvD,MAAMC,QAAO,GAAIlB,UAAU,CAACK,EAAE,EAAES,KAAK;QACrC,MAAMK,IAAI,MAAMlB,OAAO,CAACiB,QAAQ;QAChCC,CAAC,CAACC,OAAO,CAAEC,GAAG,IAAK;UACf,IAAI,CAACX,KAAI,GAAI,CAAC,GAAG,IAAI,CAACA,KAAK,EAAEW,GAAG,CAACb,IAAI,EAAE,CAAE,EAAE;QAC/C,CAAC,CAAC;;QACF,IAAI,CAACE,KAAK,CAACU,OAAO,CAAEE,GAAG,IAAK;UAC1B,IAAIC,MAAK,GAAI,EAAC;UACd,KAAK,IAAIC,IAAI,CAAC,EAAEA,IAAIF,GAAG,CAACf,IAAI,CAACkB,MAAM,EAAED,CAAC,EAAE,EAAE;YACxCD,MAAM,CAACG,IAAI,CAAC;cAACnB,IAAI,EAAEe,GAAG,CAACf,IAAI,CAACiB,CAAC,CAAC;cAAEG,MAAM,EAAEL,GAAG,CAACK,MAAM,CAACH,CAAC,CAAC;cAAEI,KAAK,EAAEN,GAAG,CAACM,KAAK,CAACJ,CAAC;YAAC,CAAC;UAC7E;UACAK,MAAM,CAACC,MAAM,CAACR,GAAG,EAAE;YAACC,MAAM,EAAEA;UAAM,CAAC;QACrC,CAAC;QACDQ,OAAO,CAACC,GAAG,CAAC,IAAI,CAACtB,KAAK;MAC1B,EAAE,OAAOuB,CAAC,EAAE;QACRF,OAAO,CAACC,GAAG,CAACC,CAAC,CAAC;MAClB;IAEN;EACF,CAAC;EACCC,UAAU,EAAE;IACVpC,MAAM;IACNC;EACF;AACJ","names":["NavBar","Footer","collection","getDocs","getFirestore","getAuth","onAuthStateChanged","db","auth","name","data","user","order","mounted","getAll","methods","path1","String","currentUser","email","orderRef","a","forEach","doc","ele","dishes","i","length","push","amount","price","Object","assign","console","log","e","components"],"sourceRoot":"","sources":["/Users/zhangbokai/Desktop/bt3103/Group5_BT3103/frontend/src/views/OrderRecords.vue"],"sourcesContent":["<template>\n  <NavBar />\n  <div class=\"topnav\">\n    <h1>Order Records</h1>\n  </div>\n\n  <div class=\"order\" v-for=\"item in order\" :key=\"item.date\">\n    {{ item.date }}\n    <div class=\"food\"> \n      <div class=\"name\">Dish name</div>\n      <div class=\"amount\">Dish amount</div>\n      <div class=\"price\">Dish price</div>\n    </div>\n    \n    <div class=\"food\" v-for=\"dish in item.dishes\" :key=\"dish\">\n      <div class=\"name\">{{dish.name}}</div>\n      <div class=\"amount\">{{dish.amount}}</div>\n      <div class=\"price\">{{dish.price}}</div>\n    </div>\n  </div>\n  <Footer />\n</template>\n\n<script>\nimport NavBar from '@/components/NavBar.vue'\nimport Footer from '@/components/Footer.vue'\nimport {collection, getDocs} from \"firebase/firestore\"\nimport { getFirestore } from \"firebase/firestore\"\nimport {getAuth, onAuthStateChanged} from 'firebase/auth'\n\nconst db = getFirestore();\nconst auth = getAuth();\n\nexport default{\n    name:'OrderRecords',\n    data() {\n        return {\n        user: false,\n        order: [],\n        }\n       \n  },\n  async mounted() {\n    onAuthStateChanged(auth, async(user)=>{\n    if (user) { \n        this.user=user;\n        await this.getAll();\n    }\n    });\n  },\n  methods: {\n        async getAll() {\n          try {\n              const path1 = String(auth.currentUser.email) + '_orders'\n              const orderRef = collection(db, path1)\n              const a = await getDocs(orderRef)\n              a.forEach((doc) => {\n                  this.order = [...this.order, doc.data(), ] //push to order array\n              });\n              this.order.forEach((ele) => {\n                let dishes = []\n                for (let i = 0; i < ele.name.length; i++) {\n                  dishes.push({name: ele.name[i], amount: ele.amount[i], price: ele.price[i]})\n                }\n                Object.assign(ele, {dishes: dishes})\n              })\n              console.log(this.order)\n          } catch (e) {\n              console.log(e);\n          }\n          \n    }\n  },\n    components: {\n      NavBar,\n      Footer\n    }\n}\n</script>\n\n<style>\n  .topnav {\n  overflow: auto;\n  background-color:#F4EDE5;\n  align-content: center;\n  }\n\n  .order {\n  border-color: #F4EDE5;\n  border-style: solid;\n  border-width: 10px;\n  border-radius: 10%;\n  margin-top: 1.5cm;\n  width: 62%;\n  padding-top: 0.4cm;\n  margin-left: 8cm;\n  }\n\n  .food {\n    display: flex;\n  }\n\n  .name {\n    width: 50%\n  }\n\n  .amount {\n    width: 20%\n  }\n\n  .price {\n    width: 30%\n  }\n</style>"]}]}