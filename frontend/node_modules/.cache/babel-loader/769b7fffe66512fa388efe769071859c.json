{"remainingRequest":"/Users/zhongyitong/Downloads/bt3103/Group5_BT3103/frontend/node_modules/babel-loader/lib/index.js!/Users/zhongyitong/Downloads/bt3103/Group5_BT3103/frontend/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/zhongyitong/Downloads/bt3103/Group5_BT3103/frontend/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/zhongyitong/Downloads/bt3103/Group5_BT3103/frontend/src/components/MainMenu.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/zhongyitong/Downloads/bt3103/Group5_BT3103/frontend/src/components/MainMenu.vue","mtime":1667813311090},{"path":"/Users/zhongyitong/Downloads/bt3103/Group5_BT3103/frontend/babel.config.js","mtime":1667813304654},{"path":"/Users/zhongyitong/Downloads/bt3103/Group5_BT3103/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1667813306437},{"path":"/Users/zhongyitong/Downloads/bt3103/Group5_BT3103/frontend/node_modules/babel-loader/lib/index.js","mtime":1667813306337},{"path":"/Users/zhongyitong/Downloads/bt3103/Group5_BT3103/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1667813306437},{"path":"/Users/zhongyitong/Downloads/bt3103/Group5_BT3103/frontend/node_modules/vue-loader-v16/dist/index.js","mtime":1667813310719}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGZpcmViYXNlQXBwIGZyb20gJy4uL2ZpcmViYXNlLmpzJzsKaW1wb3J0IHsgY29sbGVjdGlvbiwgZ2V0RG9jcyB9IGZyb20gImZpcmViYXNlL2ZpcmVzdG9yZSI7CmltcG9ydCB7IGdldEZpcmVzdG9yZSB9IGZyb20gImZpcmViYXNlL2ZpcmVzdG9yZSI7CmltcG9ydCB7IGdldEF1dGgsIG9uQXV0aFN0YXRlQ2hhbmdlZCB9IGZyb20gJ2ZpcmViYXNlL2F1dGgnOwppbXBvcnQgeyBkb2MsIHNldERvYyB9IGZyb20gImZpcmViYXNlL2ZpcmVzdG9yZSI7CmNvbnN0IGRiID0gZ2V0RmlyZXN0b3JlKGZpcmViYXNlQXBwKTsKY29uc3QgYXV0aCA9IGdldEF1dGgoKTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdtYWlubWVudScsCiAgZGF0YTogKCkgPT4gKHsKICAgIG1lbnU6IFtdCiAgfSksCiAgYXN5bmMgbW91bnRlZCgpIHsKICAgIC8vYXdhaXQgdGhpcy5nZXRBbGwoKTsKICAgIG9uQXV0aFN0YXRlQ2hhbmdlZChhdXRoLCBhc3luYyB1c2VyID0+IHsKICAgICAgaWYgKHVzZXIpIHsKICAgICAgICB0aGlzLnVzZXIgPSB1c2VyOwogICAgICAgIGF3YWl0IHRoaXMuZ2V0QWxsKCk7CiAgICAgIH0KICAgIH0pOwogIH0sCiAgbWV0aG9kczogewogICAgYXN5bmMgZ2V0QWxsKCkgewogICAgICB0cnkgewogICAgICAgIC8vVE9ETy0tPnBhZ2luYXRpb24KICAgICAgICBjb25zdCBtZW51UmVmID0gY29sbGVjdGlvbihkYiwgIm1lbnUiKTsgLy9yZWZyZW5jZSB0aGUgY29sbGVjdGlvbgogICAgICAgIGNvbnN0IHEgPSBhd2FpdCBnZXREb2NzKG1lbnVSZWYpOyAvL2dldCBhbGwgZG9jcyBpbiBjb2xsZWN0aW9uCiAgICAgICAgcS5mb3JFYWNoKGRvYyA9PiB7CiAgICAgICAgICB0aGlzLm1lbnUgPSBbLi4udGhpcy5tZW51LCBkb2MuZGF0YSgpXTsgLy9wdXNoIHRvIG1lbnUgYXJyYXkKICAgICAgICB9KTsKCiAgICAgICAgY29uc29sZS5sb2codGhpcy5tZW51KTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICB9CiAgICB9LAogICAgYXN5bmMgYWRkVG9DYXJ0KGJ1cmdlcikgewogICAgICB0cnkgewogICAgICAgIGNvbnNvbGUubG9nKGAke2J1cmdlci5uYW1lfSBhZGRlZCB0byBjYXJ0YCk7CiAgICAgICAgY29uc3Qgb3JkZXIgPSB7CiAgICAgICAgICBuYW1lOiBidXJnZXIubmFtZSwKICAgICAgICAgIHByaWNlOiBidXJnZXIucHJpY2UsCiAgICAgICAgICBhbW91bnQ6IDEKICAgICAgICB9OwogICAgICAgIGNvbnN0IGRvY1JlZiA9IGF3YWl0IHNldERvYyhkb2MoZGIsIFN0cmluZyhhdXRoLmN1cnJlbnRVc2VyLmVtYWlsKSwgYnVyZ2VyLm5hbWUpLCBvcmRlcik7CiAgICAgICAgYWxlcnQoIkFkZCB0byBjYXJ0IHN1Y2Nlc3NmdWxseSEiKTsKICAgICAgICBjb25zb2xlLmxvZyhkb2NSZWYpOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgLy8gc3RhdGVtZW50cwogICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICB9CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":"AAqBA,OAAOA,WAAU,MAAO,gBAAgB;AACxC,SAAQC,UAAU,EAAEC,OAAO,QAAO,oBAAoB;AACtD,SAASC,YAAW,QAAS,oBAAmB;AAChD,SAAQC,OAAO,EAAEC,kBAAkB,QAAO,eAAe;AACzD,SAASC,GAAG,EAAEC,MAAM,QAAO,oBAAoB;AAC/C,MAAMC,EAAC,GAAIL,YAAY,CAACH,WAAW,CAAC;AACpC,MAAMS,IAAG,GAAIL,OAAO,EAAE;AAEtB,eAAe;EACXM,IAAI,EAAE,UAAU;EACnBC,IAAI,EAAE,OAAO;IACZC,IAAI,EAAE;EACP,CAAC,CAAC;EACF,MAAMC,OAAO,GAAG;IACf;IACAR,kBAAkB,CAACI,IAAI,EAAE,MAAOK,IAAI,IAAG;MACvC,IAAIA,IAAI,EAAE;QACT,IAAI,CAACA,IAAI,GAACA,IAAI;QACd,MAAM,IAAI,CAACC,MAAM,EAAE;MACpB;IACA,CAAC;EACF,CAAC;EACEC,OAAO,EAAE;IACX,MAAMD,MAAM,GAAG;MACd,IAAI;QACH;QACA,MAAME,OAAM,GAAIhB,UAAU,CAACO,EAAE,EAAE,MAAM,GAAE;QACvC,MAAMU,IAAI,MAAMhB,OAAO,CAACe,OAAO,GAAE;QACjCC,CAAC,CAACC,OAAO,CAAEb,GAAG,IAAK;UAClB,IAAI,CAACM,IAAG,GAAI,CAAC,GAAG,IAAI,CAACA,IAAI,EAAEN,GAAG,CAACK,IAAI,EAAE,CAAE,EAAE;QAC1C,CAAC,CAAC;;QACFS,OAAO,CAACC,GAAG,CAAC,IAAI,CAACT,IAAI;MACtB,EAAE,OAAOU,CAAC,EAAE;QACXF,OAAO,CAACC,GAAG,CAACC,CAAC,CAAC;MACf;IACD,CAAC;IACK,MAAMC,SAAS,CAACC,MAAM,EAAE;MAC7B,IAAI;QACHJ,OAAO,CAACC,GAAG,CAAE,GAAEG,MAAM,CAACd,IAAI,gBAAgB;QAC1C,MAAMe,KAAI,GAAI;UACbf,IAAI,EAAEc,MAAM,CAACd,IAAI;UACjBgB,KAAK,EAAEF,MAAM,CAACE,KAAK;UACnBC,MAAM,EAAE;QACT;QACA,MAAMC,MAAK,GAAI,MAAMrB,MAAM,CAACD,GAAG,CAACE,EAAE,EAAEqB,MAAM,CAACpB,IAAI,CAACqB,WAAW,CAACC,KAAK,CAAC,EAAEP,MAAM,CAACd,IAAI,CAAC,EAACe,KAAK;QACtFO,KAAK,CAAC,2BAA2B;QACjCZ,OAAO,CAACC,GAAG,CAACO,MAAM;MACnB,EAAE,OAAON,CAAC,EAAE;QACX;QACAF,OAAO,CAACC,GAAG,CAACC,CAAC,CAAC;MACf;IACK;EACP;AACD","names":["firebaseApp","collection","getDocs","getFirestore","getAuth","onAuthStateChanged","doc","setDoc","db","auth","name","data","menu","mounted","user","getAll","methods","menuRef","q","forEach","console","log","e","addToCart","burger","order","price","amount","docRef","String","currentUser","email","alert"],"sourceRoot":"","sources":["/Users/zhongyitong/Downloads/bt3103/Group5_BT3103/frontend/src/components/MainMenu.vue"],"sourcesContent":["<template>\n  <section class=\"menu section bd-container\" id=\"home\">\n\n<div>\n    <h2 class=\"section-title\">Burger Menu</h2>\n    <div class=\"menu\">\n        <div class=\"menu_content\" v-for=\"burger in menu\" :key=\"burger.name\">\n            <img :src=\"burger.imageAddress\" alt=\"\" class=\"menu_img\">\n            <h3 class=\"menu_name\">{{burger.name}}</h3>\n            <span class=\"menu_price\">${{burger.price}}</span>\n\t\t\t<br>\n            <button @click=\"addToCart(burger)\" class=\"menu_button\">\n                Add To Cart\n\t\t\t</button>\n        </div>\n    </div>\n</div>\n</section>\n</template>\n\n<script>\nimport firebaseApp from '../firebase.js';\nimport {collection, getDocs} from \"firebase/firestore\";\nimport { getFirestore } from \"firebase/firestore\"\nimport {getAuth, onAuthStateChanged} from 'firebase/auth';\nimport { doc, setDoc} from \"firebase/firestore\";\nconst db = getFirestore(firebaseApp);\nconst auth = getAuth();\n\nexport default {\n    name: 'mainmenu',\n\tdata: () => ({\n\t\tmenu: [],\n\t}),\n\tasync mounted() {\n\t\t//await this.getAll();\n\t\tonAuthStateChanged(auth, async (user)=>{\n\t\tif (user) {\n\t\t\tthis.user=user;\n\t\t\tawait this.getAll();\n\t\t}\n\t\t})\n\t},\n    methods: {\n\t\tasync getAll() {\n\t\t\ttry {\n\t\t\t\t//TODO-->pagination\n\t\t\t\tconst menuRef = collection(db, \"menu\") //refrence the collection\n\t\t\t\tconst q = await getDocs(menuRef) //get all docs in collection\n\t\t\t\tq.forEach((doc) => {\n\t\t\t\t\tthis.menu = [...this.menu, doc.data(), ] //push to menu array\n\t\t\t\t});\n\t\t\t\tconsole.log(this.menu)\n\t\t\t} catch (e) {\n\t\t\t\tconsole.log(e);\n\t\t\t}\n\t\t},\n        async addToCart(burger) {\n\t\t\ttry {\n\t\t\t\tconsole.log(`${burger.name} added to cart`)\n\t\t\t\tconst order = {\n\t\t\t\t\tname: burger.name,\n\t\t\t\t\tprice: burger.price,\n\t\t\t\t\tamount: 1\n\t\t\t\t}\n\t\t\t\tconst docRef = await setDoc(doc(db, String(auth.currentUser.email), burger.name),order)\n\t\t\t\talert(\"Add to cart successfully!\")\n\t\t\t\tconsole.log(docRef)\n\t\t\t} catch (e) {\n\t\t\t\t// statements\n\t\t\t\tconsole.log(e);\n\t\t\t} \n        },\n\t},\n}\n</script>\n\n<style scoped>\n.menu_content{\n    float: left;\n\tborder-radius: 25px;\n\tborder: 2px solid #a4670c;\n\tmargin: 30px;\n\talign-items: center;\n}\n.menu{\n\ttext-align: center;\n\talign-items: center;\n\tdisplay: flex;\n\tjustify-content: center;\n\tflex-wrap: wrap;\n\n}\n.menu_button{\n\tbackground-color: #c77414;\n\tcolor: white;\n\ttext-align: center;\n\tborder-radius: 12px;\n\tfont-weight: bold;\n\n}\n\n\n</style>\n"]}]}